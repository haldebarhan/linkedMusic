<div
  class="container-fluid d-flex justify-content-center align-items-center"
  style="min-height: 85vh"
>
  <div class="p-4 shadow rounded" style="max-width: 500px; width: 100%">
    <h2 class="text-center mb-3">Inscription</h2>
    <p class="text-center text-muted mb-4">
      Créez un compte pour rejoindre la plateforme
    </p>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Nom -->
      <div class="mb-3">
        <div class="input-group input-group-lg has-validation">
          <span class="input-group-text"><i class="fas fa-user"></i></span>
          <input
            type="text"
            formControlName="lastName"
            class="form-control"
            placeholder="Nom"
            [ngClass]="{
              'is-invalid':
                (signupForm.get('lastName')?.touched || submitted) &&
                signupForm.get('lastName')?.invalid
            }"
          />
          <div class="invalid-feedback">Le nom est requis.</div>
        </div>
      </div>

      <!-- Prénoms -->
      <div class="mb-3">
        <div class="input-group input-group-lg has-validation">
          <span class="input-group-text"><i class="fas fa-user-tag"></i></span>
          <input
            type="text"
            formControlName="firstName"
            class="form-control"
            placeholder="Prénoms"
            [ngClass]="{
              'is-invalid':
                (signupForm.get('firstName')?.touched || submitted) &&
                signupForm.get('firstName')?.invalid
            }"
          />
          <div class="invalid-feedback">Les prénoms sont requis.</div>
        </div>
      </div>

      <!-- Téléphone -->
      <div class="mb-3">
        <div class="input-group input-group-lg has-validation">
          <span class="input-group-text"><i class="fas fa-phone"></i></span>
          <input
            type="tel"
            formControlName="phone"
            class="form-control"
            placeholder="N° de téléphone"
            [ngClass]="{
              'is-invalid':
                (signupForm.get('phone')?.touched || submitted) &&
                signupForm.get('phone')?.invalid
            }"
          />
          <div class="invalid-feedback">
            Numéro de téléphone requis (ex: 0102030405).
          </div>
        </div>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <div class="input-group input-group-lg has-validation">
          <span class="input-group-text"><i class="fas fa-envelope"></i></span>
          <input
            type="email"
            formControlName="email"
            class="form-control"
            placeholder="Email"
            [ngClass]="{
              'is-invalid':
                (signupForm.get('email')?.touched || submitted) &&
                signupForm.get('email')?.invalid
            }"
          />
          <div class="invalid-feedback">
            Entrez un email valide (ex: usermail.com).
          </div>
        </div>
      </div>

      <!-- Mot de passe -->
      <div class="mb-3">
        <div class="input-group input-group-lg has-validation">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input
            type="password"
            formControlName="password"
            class="form-control"
            placeholder="Mot de passe"
            [ngClass]="{
              'is-invalid':
                (signupForm.get('password')?.touched || submitted) &&
                signupForm.get('password')?.invalid
            }"
          />
          <div class="invalid-feedback">
            Le mot de passe doit contenir au moins 6 caractères.
          </div>
        </div>
      </div>

      <!-- Photo -->
      <div class="mb-4">
        <div class="input-group input-group-lg has-validation">
          <span class="input-group-text"><i class="fas fa-image"></i></span>
          <input
            type="file"
            formControlName="photo"
            class="form-control"
            accept="image/*"
            [ngClass]="{
              'is-invalid':
                (signupForm.get('photo')?.touched || submitted) &&
                signupForm.get('photo')?.invalid
            }"
            (change)="onFileSelected($event)"
          />
          <div class="invalid-feedback">La photo est requise.</div>
        </div>
      </div>

      <!-- Bouton -->
      <button
        type="submit"
        class="btn btn-primary btn-lg w-100"
        [disabled]="!signupForm.valid"
        *ngIf="!submitted"
      >
        Inscription
      </button>
      <button
        class="btn btn-primary btn-lg w-100"
        type="button"
        disabled
        *ngIf="submitted"
      >
        <span
          class="spinner-border spinner-border-sm"
          aria-hidden="true"
        ></span>
        <span role="status">Patientez...</span>
      </button>
    </form>

    <!-- Lien vers connexion -->
    <div class="text-center mt-3">
      <small class="text-muted">
        Déjà un compte ?
        <a
          (click)="goToLogin()"
          class="text-decoration-none"
          style="cursor: pointer"
          >Se connecter</a
        >
      </small>
    </div>
  </div>
</div>
